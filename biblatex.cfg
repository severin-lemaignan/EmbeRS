%\AtEveryCitekey{%
%  \clearname{translator}%
%  \clearlist{author}%
%  \clearfield{title}%
%  \clearlist{publisher}%
%  \clearfield{isbn}%
%  \clearfield{book}%
%  \clearfield{journal}%
%  \clearfield{booktitle}%
%  \clearfield{url}%
%}
%\DeclareNameFormat{}{\usebibmacro{name:first-last}{}{#5}{#1}{#7}}
%\DeclareNameFormat{family-only}{\usebibmacro{name:family}{}{}{#1}{}}

% display only the family names
\DeclareNameFormat{family-only}{%
    \usebibmacro{name:family}
      {\namepartfamily}
      {\namepartgiven}
      {\namepartprefix}
      {\namepartsuffix}%
  \usebibmacro{name:andothers}}
\DeclareNameAlias{author}{family-only}

%\DeclareFieldFormat
%  [article,inbook,incollection,inproceedings,patent,thesis,unpublished]
%  {title}{#1\isdot}
%\DeclareFieldFormat{journaltitle}{}
%\DeclareFieldFormat{issuetitle}{}
%\DeclareFieldFormat{maintitle}{}
%\DeclareFieldFormat{booktitle}{}
\DeclareFieldFormat{doi}{%
  \ifhyperref
    {\href{https://doi.org/#1}{\mkbibparens{\nolinkurl{#1}}}}
    {\nolinkurl{#1}}}
%%\renewbibmacro{in:}{%
%%  \ifentrytype{article}{}{\printtext{\bibstring{in}\intitlepunct}}}
%\renewbibmacro*{in:}{}
%
%\renewbibmacro*{date}{}
%\DeclareFieldFormat{extradate}{\mknumalph{#1}}
%
%% Comma before date; date not in parentheses
%\renewbibmacro*{issue+date}{%
%  \setunit*{\addcomma\space}% NEW
%%  \printtext[parens]{% DELETED
%    \iffieldundef{issue}
%      {\usebibmacro{date}}
%      {\printfield{issue}%
%       \setunit*{\addspace}%
%%       \usebibmacro{date}}}% DELETED
%       \usebibmacro{date}}% NEW
%  \newunit}


% "In:" removed for articles; issue/date macros added after note+pages macro
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/translator+others}%
  \setunit{\labelnamepunct}\newblock
  \usebibmacro{title}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{bytranslator+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}% DELETED
  \usebibmacro{journal+issuetitle}%
  \newunit
  \usebibmacro{byeditor+others}%
  \newunit
  \usebibmacro{note+pages}%
  \setunit{\addspace}% NEW
  \usebibmacro{issue+date}% NEW
  \setunit{\addcolon\space}% NEW
  \usebibmacro{issue}% NEW
  \newunit\newblock
  \iftoggle{bbx:isbn}
    {\printfield{issn}}
    {}%
  \newunit\newblock
  \usebibmacro{doi+eprint+url}%
  \newunit\newblock
  \usebibmacro{addendum+pubstate}%
  \setunit{\bibpagerefpunct}\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

\DeclareBibliographyDriver{inproceedings}{%
  \usebibmacro{author/translator+others}%
  \setunit{\addspace}% NEW
  \usebibmacro{date}% NEW
  \setunit{\space}% NEW
  \printfield{doi}}

\DeclareBibliographyDriver{inbook}{%
  \usebibmacro{author/translator+others}%
  \setunit{\addspace}% NEW
  \usebibmacro{date}% NEW
  \setunit{\space}% NEW
  \printfield{doi}}

\DeclareBibliographyDriver{article}{%
  \usebibmacro{author/translator+others}%
  \setunit{\addspace}% NEW
  \usebibmacro{date}% NEW
  \setunit{\space}% NEW
  \printfield{doi}}
